@import '../variables';
@import '../mixins';

// .#{$prefix}-ui-playlistmenu {
//   background: rebeccapurple;
// }

// Below is from the current CSS.
.#{$prefix}-ui-playlistmenu {
  bottom: -16%;
  left: 0;
  opacity: 0;
  overflow-x: auto;
  overflow-y: hidden;
  -ms-overflow-style: -ms-autohiding-scrollbar;
  -webkit-overflow-scrolling: touch;
  position: absolute;
  transition: visibility 0s linear $animation-duration, opacity $animation-duration linear, bottom $animation-duration ease-out;
  visibility: hidden;
  white-space: nowrap;
  width: 100%;
  
  &::-webkit-scrollbar {
    display: none;
  }

  &:hover {
    bottom: 0 !important;
    padding: {
      bottom: 15px;
    }

    // .#{$prefix}-ui-arrows {
    //   visibility: visible;
    //   opacity: 1;
    // }
  }

  // .#{$prefix}-ui-arrows {
  //   visibility: hidden;
  //   opacity: 0;
  //   transition: opacity $animation-duration, visibility $animation-duration;
  // }

  p {
    padding: 1em 0.5em 0;
    color: white;
    font-size: 1em;
    text-align: left;
  }

  a {
    height: 100%;
    color: white;
    display: block;
    cursor: pointer;
    text-align: left;
    text-decoration: none;
  }

  // // Arrow buttons.
  // .#{$prefix}-ui-arrow-prev, .#{$prefix}-ui-arrow-next {
  //   position: fixed;
  //   bottom: 15%;
  //   background: none;
  //   background-repeat: no-repeat;
  //     color: inherit;
  //     border: none;
  //     padding: 0;
  //     font: inherit;
  //     cursor: pointer;
  //     outline: inherit;

  //   &:hover {
  //     @include svg-icon-shadow;
  //   }

  //   &.hidden {
  //     display: none;
  //   }
  // }

  // .#{$prefix}-ui-arrow-prev {
  //   left: 0;
  //   margin: {
  //     left: 10px;
  //   }

  //   &:before {
  //     content: "";
  //     background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhcGFfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAyMzggMjM4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMzggMjM4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6I0ZGRkZGRjt9PC9zdHlsZT48Zz48Zz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjYuMywxMzAuM2wxMDkuOCwxMDMuMWM2LjYsNi4yLDE3LjMsNi4yLDIzLjksMGM2LjYtNi4yLDYuNi0xNi4zLDAtMjIuNUwxMDIuMiwxMTlMMjAwLDI3LjFjNi42LTYuMiw2LjYtMTYuMywwLTIyLjVzLTE3LjMtNi4yLTIzLjksMGwtMTA5LjgsMTAzYy0zLjQsMy4xLTUsNy4yLTQuOSwxMS4zQzYxLjQsMTIzLjEsNjMsMTI3LjIsNjYuMywxMzAuM3oiLz48L2c+PC9nPjwvc3ZnPg==");
  //     display: block;
  //     width: 35px;
  //     height: 35px;
  //   }
  // }

  // .#{$prefix}-ui-arrow-next {
  //   right: 0;
  //   margin: {
  //     right: 10px;
  //   }

  //   &:before {
  //     content: "";
  //     background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhcGFfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCAyMzggMjM4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMzggMjM4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6I0ZGRkZGRjt9PC9zdHlsZT48Zz48Zz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTcwLjEsMTA3LjdMNjAuMiw0LjZjLTYuNi02LjItMTcuMy02LjItMjMuOSwwcy02LjYsMTYuMywwLDIyLjVsOTcuOSw5MS45bC05Ny45LDkxLjljLTYuNiw2LjItNi42LDE2LjMsMCwyMi41czE3LjMsNi4yLDIzLjksMGwxMDkuOC0xMDNjMy40LTMuMSw1LTcuMiw0LjktMTEuM0MxNzUsMTE0LjksMTczLjQsMTEwLjgsMTcwLjEsMTA3Ljd6Ii8+PC9nPjwvZz48L3N2Zz4=");
  //     display: block;
  //     width: 35px;
  //     height: 35px;
  //   }
  // }

  .#{$prefix}-ui-playlistmenuitem {
    display: inline-block;
    position: relative;
    width: 24%;
    word-break: break-word;
    white-space: normal;
    padding: {
      left: 10px;
      right: 10px;
    }
    vertical-align: top;
    object-fit: cover;

    button {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      display: block;
      height: 100%;
      padding: 0;
      text-align: left;
      text-decoration: none;

      &:hover,
      &:focus,
      &:active {
        outline: 0;
      }
    }

    p {
      margin: 0;
      text-decoration: none;
    }

    .playlist-thumbnail-wrapper {
      position: relative;
      color: white;
      font-weight: 400;
      border: 2px solid transparentize($color-primary, .8);
      border-radius: 3px;
    }

    .playlist-duration {
      width: 100%;
      position: absolute;
      background: linear-gradient(to bottom, $color-transparent, $color-background-bars);
      bottom: 0;
      right: 0;
      padding: .5em;
      font-size: 1em;
      text-align: right;
    }

    .playlist-item-playing {
      opacity: 0;
      visibility: hidden;
      position: absolute;
      top: 40%;
      width: 100%;
      text-align: center;
      text-transform: uppercase;
      transition: opacity $animation-duration, visibility $animation-duration;
    }

    .playlist-item-inside {
      background: linear-gradient(to top, $color-transparent, $color-background-bars);
      position: absolute;
      top: 0;
        width: 100%;
        height: 100%;
    }

    .playlist-title {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      padding: {
        top: .5em;
      }

      overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .active .playlist-item-playing {
      opacity: 1;
      visibility: visible;
      color: white;
      text-shadow: 0 0 5px $color-black;
      font-weight: 700;
        font-size: 1em;
    }

    .playlist-thumbnail {
      display: block;
      width: 100%;
    }
  }
}

// Customizations for standard elements when viewing a playlist.
.#{$prefix}-ui-is-playlist {
	.#{$prefix}-ui-controlbar {
		background: linear-gradient(to bottom, $color-transparent, $color-background-bars);
		padding: {
			top: 1%;
			bottom: 6.5%;
		}
  }
  
  .#{$prefix}-ui-settings-panel {
    bottom: 9em;
  }
}

// Force show the playlist menu when force-showing all controls.
&.#{$prefix}-controls-shown {
	.#{$prefix}-ui-playlistmenu {
		visibility: visible;
		opacity: 1;
		transition-delay: 0s;
	}
}

// Responsive customizations.
&.#{$prefix}-layout-max-width-800 {
	.#{$prefix}-ui-playlistmenu {
		.#{$prefix}-ui-playlistmenuitem {
			width: 28%;
		}
	}
}

&.#{$prefix}-layout-max-width-600 {
  .#{$prefix}-ui-is-playlist {
		.#{$prefix}-ui-controlbar {
			padding: {
				bottom: 11%;
			}
		}

		.#{$prefix}-ui-playlistmenu {
      background: rebeccapurple;
      
			.#{$prefix}-ui-playlistmenuitem {
				width: 32%;

				.playlist-title {
					font-size: 0.9em;
				}
				.playlist-item-playing {
					font-size: 0.8em;
				}
				.playlist-duration {
					font-size: 0.8em;
				}
			}
		}
	}
}

&.#{$prefix}-ui-skin-smallscreen, 
&.#{$prefix}-layout-max-width-400 {
	.#{$prefix}-ui-playlistmenu {
		background-color: $color-black-faded--default;
		@include layout-cover;
		@include layout-center-children-in-container;

    // Reverse the force-show on .-controls-shown above, as in mobile, 
    // the playlist menu is shown via the toggle button.
    display: block;
		visibility: hidden;
    opacity: 0;

    // Sweet, and this allows for the native bitmovin ui toggling
    // to work exactly as expected still.
    &:not(.#{$prefix}-hidden) {
      visibility: visible;
      opacity: 1;
    }
    
		bottom: 0 !important;
		padding: 1em 1.1em;
		overflow-y: scroll;

		transition: opacity $animation-duration, visibility $animation-duration;

		.#{$prefix}-ui-playlistmenuitem {
			display: block !important;
			width: 100% !important;
			margin: {
				bottom: .5em;
			}
			padding: {
				bottom: .4em;
			}
			border: {
				bottom: 1px solid transparentize($color-primary, .8);
			}

			.playlist-thumbnail {
				width: 22% !important;
			}
			.playlist-item-inside {
				width: 78%;
				background: none !important;
				margin-left: 22%;
			}
			.playlist-duration {
				background: none;
				position: relative;
				display: block;
				font-size: .7em;
				padding: {
					left: .7em;
					top: 0;
				}
			}
			.playlist-title {
				display: block;
				position: relative;
				font-size: .9em;
				padding: {
					top: 0;
				}
			}

			.playlist-item-playing {
				display: none !important;
			}

			.active {
				background: $color-background-highlight;
				border: 1px solid $color-secondary
			}
		}

		.playlist-thumbnail-wrapper {
			border: none !important;
		}
	}

	.#{$prefix}-ui-is-playlist {
		.#{$prefix}-ui-controlbar {
			padding: {
				bottom: .5em !important;
			}
		}
	}
}
