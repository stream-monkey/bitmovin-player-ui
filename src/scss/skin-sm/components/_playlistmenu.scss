@import '../variables';
@import '../mixins';

.#{$prefix}-ui-playlistmenu {
  // ...
}

// Below is from the current CSS.
$playlist-bottom: -16%;

.#{$prefix}-ui-playlist-btn {
	@extend %ui-button;
	background: none;

	.icon {
		background-repeat: no-repeat;

		margin: {
			top: 0;
			bottom: 0;
		}

		&:hover {
	      @include svg-icon-shadow;
	    }

		&.playlist {
			@include playlist();
			height: 24px;
			width: 27px;
			margin: 0;
		}
	}
}

.#{$prefix}-ui-playlist-container {
	.#{$prefix}-ui-titlebar {
		@extend %ui-container;

		@include hidden-animated;
		@include layout-align-top;

		display: block;

		// background: linear-gradient(to top, $color-transparent, $color-background-bars);
		padding: .5em 1em 1em;
		pointer-events: none;

		> .#{$prefix}-container-wrapper {
			padding: .5em;
			pointer-events: none;

			.#{$prefix}-label-metadata {
				pointer-events: none;
			}

			.#{$prefix}-label-metadata-title {
				cursor: default;
				display: block;
				font-size: 1.2em;
				text-shadow: 0 0 5px $color-black;
				white-space: normal;
			}

			.#{$prefix}-label-metadata-description {
				color: lighten($color-secondary, 30%);
				cursor: default;
				display: block;
				text-shadow: 0 0 5px $color-black;
				white-space: normal;
			}
		}
	}

	.#{$prefix}-ui-controlbar {
		background: linear-gradient(to bottom, $color-transparent, $color-background-bars);
		padding: {
			top: 1%;
			bottom: 6.5%;
		}
	}

	.playlist-wrapper {
		position: absolute;
	    bottom: $playlist-bottom;
	    left: 0;
		white-space: nowrap;
		width: 100%;

		overflow-x: auto;
		overflow-y: hidden;
		-ms-overflow-style: -ms-autohiding-scrollbar;
		-webkit-overflow-scrolling: touch;
		white-space: nowrap;
		&::-webkit-scrollbar {
			display: none;
		}

		visibility: hidden;
	    opacity: 0;
	    transition: visibility 0s linear $animation-duration, opacity $animation-duration linear, bottom $animation-duration ease-out;

		.#{$prefix}-ui-arrows {
			visibility: hidden;
		    opacity: 0;
		    transition: opacity $animation-duration, visibility $animation-duration;
		}

		&:hover {
			bottom: 0!important;
			padding: {
				bottom: 15px;
			}

			.#{$prefix}-ui-arrows {
				visibility: visible;
				opacity: 1;
			}
		}

		p {
			padding: 1em 0.5em 0;
			color: white;
			font-size: 1em;
			text-align: left;
		}
		a {
			height: 100%;
			color: white;
			display: block;
			cursor: pointer;
			text-align: left;
			text-decoration: none;
		}

		.#{$prefix}-ui-closebutton-playlists {
			display: none;
			position: fixed;
			height: 26px;
			width: 26px;
		}

		// Arrows
		.#{$prefix}-ui-arrow-prev, .#{$prefix}-ui-arrow-next {
			position: fixed;
			bottom: 15%;
			background: none;
			background-repeat: no-repeat;
		    color: inherit;
		    border: none;
		    padding: 0;
		    font: inherit;
		    cursor: pointer;
		    outline: inherit;

			&:hover {
			  @include svg-icon-shadow;
			}

			&.hidden {
				display: none;
			}
		 }
		.#{$prefix}-ui-arrow-prev {
			left: 0;
			margin: {
				left: 10px;
			}

			&:before {
				content: "";
				@include chevronPrev();
				display: block;
				width: 35px;
				height: 35px;
			}
		}
		.#{$prefix}-ui-arrow-next {
			right: 0;
			margin: {
				right: 10px;
			}

			&:before {
				content: "";
				@include chevronNext();
				display: block;
				width: 35px;
				height: 35px;
			}
		}

		.playlist-item {
			display: inline-block;
			position: relative;
			width: 24%;
			word-break: break-word;
			white-space: normal;
			padding: {
				left: 10px;
				right: 10px;
			}
			vertical-align: top;
			object-fit: cover;

			a {
				height: 100%;
				color: white;
				display: block;
				cursor: pointer;
				text-align: left;
				text-decoration: none;
			}

			p {
				margin: 0;
				text-decoration: none;
			}

			.playlist-thumbnail-wrapper {
				position: relative;
				color: white;
				font-weight: 400;
				border: 2px solid transparentize($color-primary, .8);
				border-radius: 3px;
			}

			.playlist-duration {
				width: 100%;
				position: absolute;
				background: linear-gradient(to bottom, $color-transparent, $color-background-bars);
				bottom: 0;
				right: 0;
				padding: .5em;
				font-size: 1em;
				text-align: right;
			}

			.playlist-item-playing {
				opacity: 0;
				visibility: hidden;
				position: absolute;
				top: 40%;
				width: 100%;
				text-align: center;
				text-transform: uppercase;
				transition: opacity $animation-duration, visibility $animation-duration;
			}

			.playlist-item-inside {
				background: linear-gradient(to top, $color-transparent, $color-background-bars);
				position: absolute;
				top: 0;
    			width: 100%;
    			height: 100%;
			}

			.playlist-title {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				padding: {
					top: .5em;
				}

				overflow: hidden;
    			white-space: nowrap;
    			text-overflow: ellipsis;
			}

			.active .playlist-item-playing {
				opacity: 1;
				visibility: visible;
				color: white;
				text-shadow: 0 0 5px $black;
				font-weight: 700;
    			font-size: 1em;
			}

			.playlist-thumbnail {
				display: block;
				width: 100%;
			}
		}
	}
}
&.#{$prefix}-controls-shown {
	.playlist-wrapper {
		visibility: visible;
		opacity: 1;
		transition-delay: 0s;
	}
}

&.#{$prefix}-layout-max-width-800 {
	.playlist-wrapper {
		.playlist-item {
			width: 28%;
		}
	}
}
&.#{$prefix}-layout-max-width-600 {
	.#{$prefix}-ui-playlist-container {
		.#{$prefix}-ui-controlbar {
			padding: {
				bottom: 11%;
			}
		}

		.playlist-wrapper {
			.playlist-item {
				width: 32%;

				.playlist-title {
					font-size: 0.9em;
				}
				.playlist-item-playing {
					font-size: 0.8em;
				}
				.playlist-duration {
					font-size: 0.8em;
				}
			}
		}
	}
}

// Mobile corrections
&.#{$prefix}-ui-skin-smallscreen, &.#{$prefix}-layout-max-width-400 {
	.playlist-wrapper {
		background-color: $background-transparent;
		@include layout-cover;
		@include layout-center-children-in-container;

		display: block;
		visibility: hidden;
		opacity: 0;
		bottom: 0!important;
		padding: 1em 1.1em;
		overflow-y: scroll;

		transition: opacity $animation-duration, visibility $animation-duration;

		.playlist-item {
			display: block!important;
			width: 100%!important;
			margin: {
				bottom: .5em;
			}
			padding: {
				bottom: .4em;
			}
			border: {
				bottom: 1px solid transparentize($color-primary, .8);
			}

			.playlist-thumbnail {
				width: 22%!important;
			}
			.playlist-item-inside {
				width: 78%;
				background: none!important;
				margin-left: 22%;
			}
			.playlist-duration {
				background: none;
				position: relative;
				display: block;
				font-size: .7em;
				padding: {
					left: .7em;
					top: 0;
				}
			}
			.playlist-title {
				display: block;
				position: relative;
				font-size: .9em;
				padding: {
					top: 0;
				}
			}

			.playlist-item-playing {
				display: none!important;
			}

			.active {
				background: $color-background-highlight;
				border: 1px solid $color-secondary
			}
		}

		.playlist-thumbnail-wrapper {
			border: none!important;
		}

		&.open {
			visibility: visible;
			opacity: 1;
		}

		.#{$prefix}-ui-closebutton-playlists {
			display: block;
			margin: {
				top: 1em;
				right: .2em;
			}
		}

		.#{$prefix}-ui-arrows {
			display: none;
		}
	}

	.#{$prefix}-ui-playlist-container {
		.#{$prefix}-ui-controlbar {
			padding: {
				bottom: .5em!important;
			}
		}
	}
}

